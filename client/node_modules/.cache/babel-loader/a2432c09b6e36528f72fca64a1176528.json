{"ast":null,"code":"import _asyncToGenerator from \"D:\\\\BUET\\\\L-4, T-1\\\\CSE - 408 (Software Devolopment)\\\\BookFlix\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"D:\\\\BUET\\\\L-4, T-1\\\\CSE - 408 (Software Devolopment)\\\\BookFlix\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\BUET\\\\L-4, T-1\\\\CSE - 408 (Software Devolopment)\\\\BookFlix\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\BUET\\\\L-4, T-1\\\\CSE - 408 (Software Devolopment)\\\\BookFlix\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\BUET\\\\L-4, T-1\\\\CSE - 408 (Software Devolopment)\\\\BookFlix\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\BUET\\\\L-4, T-1\\\\CSE - 408 (Software Devolopment)\\\\BookFlix\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\BUET\\\\L-4, T-1\\\\CSE - 408 (Software Devolopment)\\\\BookFlix\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\BUET\\\\L-4, T-1\\\\CSE - 408 (Software Devolopment)\\\\BookFlix\\\\client\\\\src\\\\components\\\\book-profile.js\";\n\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return generator._invoke = function (innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; }(innerFn, self, context), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; this._invoke = function (method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); }; } function maybeInvokeDelegate(delegate, context) { var method = delegate.iterator[context.method]; if (undefined === method) { if (context.delegate = null, \"throw\" === context.method) { if (delegate.iterator.return && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel; context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\"); } return ContinueSentinel; } var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) { if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; } return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (object) { var keys = []; for (var key in object) { keys.push(key); } return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) { \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); } }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, catch: function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\n\n// import React, { Component } from 'react';\n// import { Link } from 'react-router-dom';\n// import Row from 'react-bootstrap/Row';\n// import Col from 'react-bootstrap/Col';\n// import Card from 'react-bootstrap/Card';\n// import axios from 'axios';\n// export default class Book extends Component{\n//   constructor(props){\n//     super(props);\n//     this.state = {\n//       book: [],\n//       id: window.location.pathname.split('/')[window.location.pathname.split('/').length - 1],\n//       user: \"\"\n//     };\n//   }\n//   componentDidMount(){\n//     axios.get('http://localhost:5000/books/'+this.state.id, {\n//       method: 'GET',\n//       headers: {\n//         'token': localStorage.getItem('token'),\n//       },\n//     })\n//       .then(response => {  \n//         this.setState({\n//           user: response.data.user,\n//           book: response.data.book,\n//         });\n//         console.log(this.state.book.coverLocation);\n//       })\n//       .catch(function(error){\n//         console.log(error);\n//       }\n//     );\n//   }\n//   renderButton(){\n//     if (this.state.user.role === \"Admin\") {\n//       return (\n//         <div>\n//           {/* button to go to /books/edit */}\n//           <Link to={'/books/edit/'+this.state.book._id}>\n//             Edit\n//           </Link>\n//       </div>\n//       );\n//     }\n//   }\n//   render(){\n//     return (\n//       <div>\n//         <Row>\n//           <Col></Col>\n//           <Col>\n//             <img src= {\"http://localhost:5000\" + this.state.book.coverLocation} alt=\"\" height='350px' width='250px'/>\n//             { this.renderButton() }\n//           </Col>\n//           <Col>\n//             <h1>{this.state.book.title}</h1>\n//             <h3>{this.state.book.author}</h3>\n//             <h5>{this.state.book.genre}</h5>\n//             <p>{this.state.book.description}</p>\n//           </Col>\n//           <Col></Col>\n//         </Row>\n//       </div>\n//     );\n//   }\n// }\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport axios from 'axios';\n\nvar Book = /*#__PURE__*/function (_Component) {\n  _inherits(Book, _Component);\n\n  function Book(props) {\n    var _this;\n\n    _classCallCheck(this, Book);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Book).call(this, props));\n    _this.componentDidMount = _this.componentDidMount.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeRating = _this.onChangeRating.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeDescription = _this.onChangeDescription.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.calc_rating = _this.calc_rating.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.addReview = _this.addReview.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      imgg: '',\n      book: [],\n      user: [],\n      reviews: [],\n      avg_rating: 0,\n      description: '',\n      rating: 0,\n      id: window.location.pathname.split('/')[window.location.pathname.split('/').length - 1]\n    };\n    return _this;\n  }\n\n  _createClass(Book, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.get('http://localhost:5000/books/' + this.state.id, {\n        method: 'GET',\n        headers: {\n          'token': localStorage.getItem('token')\n        }\n      }).then(function (response) {\n        _this2.setState({\n          user: response.data.user,\n          book: response.data.book\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n      axios.get('http://localhost:5000/books/reviews/' + this.state.id, {\n        method: 'GET',\n        headers: {\n          'token': localStorage.getItem('token')\n        }\n      }).then(function (response) {\n        _this2.setState({\n          reviews: response.data\n        });\n\n        _this2.calc_rating();\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"calc_rating\",\n    value: function calc_rating() {\n      var sum = 0;\n\n      for (var i = 0; i < this.state.reviews.length; i++) {\n        sum += this.state.reviews[i].rating;\n      }\n\n      this.setState({\n        avg_rating: sum / this.state.reviews.length\n      });\n    }\n  }, {\n    key: \"addReview\",\n    value: function () {\n      var _addReview = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(e) {\n        var review;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                review = {\n                  bookID: this.state.book._id,\n                  userID: this.state.user.id,\n                  rating: this.state.rating,\n                  description: this.state.description,\n                  timestamp: new Date()\n                };\n                console.log(this.state.user.id);\n                _context.next = 5;\n                return axios.post('http://localhost:5000/books/addReview', review, {\n                  method: 'POST',\n                  headers: {\n                    'token': localStorage.getItem('token')\n                  }\n                }).then(function (response) {\n                  console.log(response);\n                  window.location.reload();\n                }).catch(function (error) {\n                  console.log(error);\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function addReview(_x) {\n        return _addReview.apply(this, arguments);\n      }\n\n      return addReview;\n    }()\n  }, {\n    key: \"onChangeRating\",\n    value: function onChangeRating(e) {\n      this.setState({\n        rating: e.target.value\n      });\n    }\n  }, {\n    key: \"onChangeDescription\",\n    value: function onChangeDescription(e) {\n      this.setState({\n        description: e.target.value\n      });\n    }\n  }, {\n    key: \"renderEditButton\",\n    value: function renderEditButton() {\n      if (this.state.user.role === \"Admin\") {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(Link, {\n          to: '/books/edit/' + this.state.book._id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 11\n          }\n        }, \"Edit\"));\n      }\n    }\n  }, {\n    key: \"renderReviews\",\n    value: function renderReviews() {\n      var _this3 = this;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }\n      }, \"Reviews\"), this.state.reviews.map(function (review) {\n        return /*#__PURE__*/React.createElement(Row, {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(Col, {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"h5\", {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 19\n          }\n        }, \"Rating: \", review.rating), /*#__PURE__*/React.createElement(\"h5\", {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 19\n          }\n        }, \"Description: \", review.description)));\n      }));\n    }\n  }, {\n    key: \"renderReviews\",\n    value: function renderReviews() {\n      var _this4 = this;\n\n      if (this.state.reviews.length > 0) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 9\n          }\n        }, this.state.reviews.map(function (review) {\n          return /*#__PURE__*/React.createElement(Row, {\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 15\n            }\n          }, /*#__PURE__*/React.createElement(Col, {\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }\n          }, /*#__PURE__*/React.createElement(\"h5\", {\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 19\n            }\n          }, /*#__PURE__*/React.createElement(\"b\", {\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 23\n            }\n          }, review.userID.username), \" \", review.rating, \"/5\"), /*#__PURE__*/React.createElement(\"h5\", {\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 19\n            }\n          }, review.description), /*#__PURE__*/React.createElement(\"h5\", {\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 19\n            }\n          }, new Date(review.timestamp).toLocaleDateString()), /*#__PURE__*/React.createElement(\"hr\", {\n            __self: _this4,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 19\n            }\n          })));\n        }));\n      } else {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"h5\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 11\n          }\n        }, \"No Reviews yet\"));\n      }\n    }\n  }, {\n    key: \"renderReviewBox\",\n    value: function renderReviewBox() {\n      if (this.state.user.role === \"Basic\") {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"h3\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 11\n          }\n        }, \"Add Review\"), /*#__PURE__*/React.createElement(Form.Label, {\n          column: \"sm\",\n          lg: 2,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 11\n          }\n        }, \"Rating:\"), /*#__PURE__*/React.createElement(Form.Control, {\n          className: \"w-100\",\n          size: \"sm\",\n          as: \"select\",\n          onChange: this.onChangeRating,\n          value: this.state.rating,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"option\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 13\n          }\n        }, \"0\"), /*#__PURE__*/React.createElement(\"option\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }\n        }, \"1\"), /*#__PURE__*/React.createElement(\"option\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }\n        }, \"2\"), /*#__PURE__*/React.createElement(\"option\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }\n        }, \"3\"), /*#__PURE__*/React.createElement(\"option\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }\n        }, \"4\"), /*#__PURE__*/React.createElement(\"option\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }\n        }, \"5\")), /*#__PURE__*/React.createElement(Form.Label, {\n          column: \"sm\",\n          lg: 2,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 11\n          }\n        }, \"Write review:\"), /*#__PURE__*/React.createElement(Form.Control, {\n          className: \"w-100\",\n          size: \"sm\",\n          as: \"textarea\",\n          onChange: this.onChangeDescription,\n          value: this.state.description,\n          placeholder: \"\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(Button, {\n          className: \"float-end\",\n          size: \"sm\",\n          variant: \"info\",\n          onClick: this.addReview,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 11\n          }\n        }, \"Save\"));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: \"http://localhost:5000\" + this.state.book.coverLocation,\n        alt: \"\",\n        height: \"350px\",\n        width: \"250px\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: '/books/' + this.state.book._id + '/read',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 15\n        }\n      }, \"Read\")), this.renderEditButton()), /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 13\n        }\n      }, this.state.book.title, \" \"), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 13\n        }\n      }, \" \", this.state.avg_rating.toFixed(1), \"/5\"), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 13\n        }\n      }, this.state.book.author), /*#__PURE__*/React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 13\n        }\n      }, this.state.book.genre), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 13\n        }\n      }, this.state.book.description)), /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 13\n        }\n      }, \"Reviews\"), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 13\n        }\n      }), this.renderReviews()), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 13\n        }\n      }), this.renderReviewBox())), /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return Book;\n}(Component);\n\nexport { Book as default };","map":{"version":3,"names":["React","Component","Link","Row","Col","Form","Button","axios","Book","props","componentDidMount","bind","onChangeRating","onChangeDescription","calc_rating","addReview","state","imgg","book","user","reviews","avg_rating","description","rating","id","window","location","pathname","split","length","get","method","headers","localStorage","getItem","then","response","setState","data","catch","error","console","log","sum","i","e","preventDefault","review","bookID","_id","userID","timestamp","Date","post","reload","target","value","role","map","username","toLocaleDateString","coverLocation","renderEditButton","title","toFixed","author","genre","renderReviews","renderReviewBox"],"sources":["D:/BUET/L-4, T-1/CSE - 408 (Software Devolopment)/BookFlix/client/src/components/book-profile.js"],"sourcesContent":["// import React, { Component } from 'react';\r\n// import { Link } from 'react-router-dom';\r\n// import Row from 'react-bootstrap/Row';\r\n// import Col from 'react-bootstrap/Col';\r\n// import Card from 'react-bootstrap/Card';\r\n// import axios from 'axios';\r\n\r\n\r\n// export default class Book extends Component{\r\n//   constructor(props){\r\n//     super(props);\r\n\r\n//     this.state = {\r\n//       book: [],\r\n//       id: window.location.pathname.split('/')[window.location.pathname.split('/').length - 1],\r\n//       user: \"\"\r\n//     };\r\n//   }\r\n\r\n//   componentDidMount(){\r\n//     axios.get('http://localhost:5000/books/'+this.state.id, {\r\n//       method: 'GET',\r\n//       headers: {\r\n//         'token': localStorage.getItem('token'),\r\n//       },\r\n//     })\r\n//       .then(response => {  \r\n//         this.setState({\r\n//           user: response.data.user,\r\n//           book: response.data.book,\r\n//         });\r\n//         console.log(this.state.book.coverLocation);\r\n//       })\r\n//       .catch(function(error){\r\n//         console.log(error);\r\n//       }\r\n//     );\r\n//   }\r\n  \r\n//   renderButton(){\r\n//     if (this.state.user.role === \"Admin\") {\r\n//       return (\r\n//         <div>\r\n//           {/* button to go to /books/edit */}\r\n//           <Link to={'/books/edit/'+this.state.book._id}>\r\n//             Edit\r\n//           </Link>\r\n//       </div>\r\n//       );\r\n//     }\r\n//   }\r\n\r\n//   render(){\r\n//     return (\r\n//       <div>\r\n//         <Row>\r\n//           <Col></Col>\r\n//           <Col>\r\n//             <img src= {\"http://localhost:5000\" + this.state.book.coverLocation} alt=\"\" height='350px' width='250px'/>\r\n//             { this.renderButton() }\r\n//           </Col>\r\n//           <Col>\r\n//             <h1>{this.state.book.title}</h1>\r\n//             <h3>{this.state.book.author}</h3>\r\n//             <h5>{this.state.book.genre}</h5>\r\n//             <p>{this.state.book.description}</p>\r\n//           </Col>\r\n//           <Col></Col>\r\n//         </Row>\r\n//       </div>\r\n//     );\r\n//   }\r\n// }\r\n\r\n\r\nimport React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Button from 'react-bootstrap/Button';\r\nimport axios from 'axios';\r\n\r\n\r\nexport default class Book extends Component{\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.componentDidMount = this.componentDidMount.bind(this);\r\n    this.onChangeRating = this.onChangeRating.bind(this);\r\n    this.onChangeDescription = this.onChangeDescription.bind(this);\r\n    this.calc_rating = this.calc_rating.bind(this);\r\n    this.addReview = this.addReview.bind(this);\r\n\r\n    this.state = {\r\n      imgg: '',\r\n      book: [],\r\n      user: [],\r\n      reviews: [],\r\n      avg_rating: 0,\r\n      description: '',\r\n      rating: 0,\r\n      id: window.location.pathname.split('/')[window.location.pathname.split('/').length - 1],\r\n    };\r\n  }\r\n\r\n  componentDidMount(){\r\n    axios.get('http://localhost:5000/books/'+this.state.id, {\r\n      method: 'GET',\r\n      headers: {\r\n        'token': localStorage.getItem('token'),\r\n      },\r\n    })\r\n      .then(response => {  \r\n        this.setState({\r\n          user: response.data.user,\r\n          book: response.data.book,\r\n        });\r\n      })\r\n      .catch(function(error){\r\n        console.log(error);\r\n      }\r\n    );\r\n    \r\n    axios.get('http://localhost:5000/books/reviews/'+this.state.id, {\r\n      method: 'GET',\r\n      headers: {\r\n        'token': localStorage.getItem('token'),\r\n      },\r\n    }).then(response => {\r\n      this.setState({\r\n        reviews: response.data,\r\n\r\n      });\r\n      this.calc_rating();\r\n    })\r\n    .catch(function(error){\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n\r\n  calc_rating(){\r\n    let sum = 0;\r\n    for (let i = 0; i < this.state.reviews.length; i++) {\r\n      sum += this.state.reviews[i].rating;\r\n    }\r\n    this.setState({\r\n      avg_rating: sum / this.state.reviews.length,\r\n    });\r\n  }\r\n\r\n\r\n  async addReview(e) {\r\n    e.preventDefault();\r\n    const review = {\r\n      bookID: this.state.book._id,\r\n      userID: this.state.user.id,\r\n      rating: this.state.rating,\r\n      description: this.state.description,\r\n      timestamp: new Date(),\r\n    };\r\n    console.log(this.state.user.id);\r\n    await axios.post('http://localhost:5000/books/addReview', review, {\r\n      method: 'POST',\r\n      headers: {\r\n        'token': localStorage.getItem('token'),\r\n      },\r\n    })\r\n      .then(response => {\r\n        console.log(response);\r\n        window.location.reload();\r\n      }).catch(function(error){\r\n        console.log(error);\r\n      }\r\n    );\r\n  }\r\n  \r\n  onChangeRating(e) {\r\n    this.setState({\r\n      rating: e.target.value\r\n    });\r\n  }\r\n\r\n  onChangeDescription(e) {\r\n    this.setState({\r\n      description: e.target.value\r\n    });\r\n  }\r\n\r\n  renderEditButton(){\r\n    if (this.state.user.role === \"Admin\") {\r\n      return (\r\n        <div>\r\n          {/* button to go to /books/edit */}\r\n          <Link to={'/books/edit/'+this.state.book._id}>\r\n            Edit\r\n          </Link>\r\n      </div>\r\n      );\r\n    }\r\n  }\r\n\r\n\r\n  renderReviews(){\r\n      return (\r\n        <div>\r\n          <h3>Reviews</h3>\r\n          {this.state.reviews.map((review) => {\r\n            return (\r\n              <Row>\r\n                <Col>\r\n                  <h5>Rating: {review.rating}</h5>\r\n                  <h5>Description: {review.description}</h5>\r\n                </Col>\r\n              </Row>\r\n            );\r\n          }\r\n          )}\r\n        </div>\r\n      );\r\n  }\r\n\r\n\r\n  renderReviews(){\r\n    if(this.state.reviews.length > 0){\r\n      return (\r\n        <div>\r\n          {this.state.reviews.map((review) => {\r\n            return (\r\n              <Row>\r\n                <Col>\r\n                  <h5><b>{review.userID.username}</b> {review.rating}/5</h5>\r\n                  <h5>{review.description}</h5>\r\n                  <h5>{(new Date(review.timestamp).toLocaleDateString())}</h5>\r\n                  <hr/>\r\n                </Col>\r\n              </Row>\r\n            );\r\n          }\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n    else{\r\n      return (\r\n        <div>\r\n          <h5>No Reviews yet</h5>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderReviewBox(){\r\n    if (this.state.user.role === \"Basic\") {\r\n      return (\r\n        <div>\r\n          <h3>Add Review</h3>\r\n          <Form.Label column=\"sm\" lg={2}>Rating:</Form.Label>\r\n          <Form.Control className=\"w-100\" size=\"sm\" as=\"select\" onChange={this.onChangeRating} value={this.state.rating}>\r\n            <option>0</option>\r\n            <option>1</option>\r\n            <option>2</option>\r\n            <option>3</option>\r\n            <option>4</option>\r\n            <option>5</option>\r\n          </Form.Control>\r\n\r\n          <Form.Label column=\"sm\" lg={2}>Write review:</Form.Label>\r\n          <Form.Control className=\"w-100\" size=\"sm\" as=\"textarea\" onChange={this.onChangeDescription} value={this.state.description} placeholder=\"\" />\r\n          \r\n          <Button className=\"float-end\" size=\"sm\" variant=\"info\" onClick={this.addReview}>Save</Button>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <div>\r\n        <Row>\r\n          <Col></Col>\r\n          <Col>\r\n            <img src= {\"http://localhost:5000\" + this.state.book.coverLocation} alt=\"\" height='350px' width='250px'/>\r\n            <div>\r\n              <Link to={'/books/'+this.state.book._id+'/read'}>Read</Link>\r\n            </div>\r\n            {/* button to go to /books/edit */}\r\n            { this.renderEditButton() }\r\n          </Col>\r\n          <Col>\r\n            <h1>{this.state.book.title} </h1>\r\n            <h3> {this.state.avg_rating.toFixed(1)}/5</h3>\r\n            <h3>{this.state.book.author}</h3>\r\n            <h5>{this.state.book.genre}</h5>\r\n            <p>{this.state.book.description}</p>\r\n          </Col>\r\n          <Col></Col>\r\n        </Row>\r\n        <Row>\r\n          <Col></Col>\r\n          <Col>\r\n          <div>\r\n            <h3>Reviews</h3>\r\n            <br/>\r\n            {this.renderReviews()} \r\n          </div>\r\n          <div >\r\n            <br/>\r\n            { this.renderReviewBox() }\r\n          </div>\r\n          </Col>\r\n          <Col></Col>\r\n        </Row>\r\n      </div>\r\n    );\r\n  }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}